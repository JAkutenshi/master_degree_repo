Ниже приведены важные факторы для производительности \marm{} \cite{blasco2012multiagent}.

\begin{description}[noitemsep]
	
	\item [Тип архитектуры.] Большая часть фреймворков использует гибридную архитектуру, поскольку такой подход позволяет избежать ряд проблем, а именно:
	\begin{itemize}[noitemsep]
		\item Не требуется инкапсулировать в каждый узел системы общие сервисы, как, например, службу поиска других узлов: эту задачу выполняет специально выделенный узел. Так же поступают и с агенствами - контейнерами, создающие, регистрирующие и хранящие узлы-агенты.
		\item Уменьшение нагрузки на сеть коммуникаций, поскольку вся нагрузка по общим для всех узлов запросам смещается в сторону обработки на выделенных узлах. Это приводит к появлению критических узлов в системе, в случае отказа которых весь робот может оказаться неспособным продолжать выполнение поставленных задач. Таким образом, в таком подходе требуется отдельно рассматривать производительность таких критических узлов системы, как служба поиска узлов, служба именования и, возможно, другие выделенные сервисы.
	\end{itemize}
	В случае, если используется максимально децентрализованная архитектура, то возникают следующие проблемы:
	\begin{itemize}[noitemsep]
		\item Увеличивается сложность узлов, а так же нагрузка на обработку данных между узлами. Тем не менее то, насколько эффективно используются возможности фреймворка по взаимодействию между узлами, зависит от разработчика на прикладном уровне.
		\item Увеличивается нагрузка на систему коммуникации фреймворка. Под системой коммуникации понимается набор технологий и протоколов, обеспечивающих обмен данными между узлами системы. Часто для обеспечения коммуникации используются отдельные узлы, создаваемые самим фреймворком, будь то \todo{брокеры объектных запросов (ORB)} при использовании CORBA или реализации шаблона взаимодействия \enquote{издатель-подписчик} при помощи топиков \todo{(от англ. topic - тема)}, которые имеют свою внутреннюю реализацию.
	\end{itemize}

	\item [Тип взаимодействия между узлами.] При использовании многоагентной архитектуры используется несколько разных способов взаимодействия между узлами-агентами:
	\begin{itemize}[noitemsep]
		\item порты, реализующие независимое чтение из входных портов, запись во входные и взаимодействие \enquote{один ко многим};
		\item топики, реализующие шаблон \enquote{издатель-подписчик} и взаимодействие \enquote{многие ко многим};
		\item события, реализующие шаблон \enquote{наблюдатель} и асинхронное взаимодействие \enquote{один ко многим};
		\item сервисы, предоставляющие реактивный способ поведения узлам: возможность отправлять запрос от узла-клиента на узел-сервис, реализуя взаимодействие выполнения удаленных процедур;
		\item свойства, предоставляющие возможность менять состояние узлов при помощи селекторов параметров агента (get/set), реализация может отличаться в зависимости от архитектуры: гибридная архитектура представляет выделенный узел-сервис - службу свойств, децентрализованная инкапсулирует свойства узлов непосредственно в агентах системы.
	\end{itemize}
	
	Большинство фреймворков дает выбор: какой тип взаимодействия между узлами использовать, но, в случае с реализацией сервисов может возникнуть простой системы до тех пор, пока не работающий или перегруженный обработкой запросов узел, предоставлявший требуемый функционал, не будет восстановлен. Реализация отдельных типов взаимодействий влияет практически на все аспекты производительности: задержку, вычислительные ресурсы, использование памяти, энергопотребление. Для каждого из фреймворков следует тестировать каждый из способов взаимодействия по всем показателям производительности.

	\item [Протоколы коммуникации.] Для доставки сообщений обычно используются различные подходы и протоколы. Обычно разработчики реализуют решения на основе стека TCP/IP с некоторыми оптимизациями, например реализация узлов как отдельных потоков внутри процесса-агенства. Данный подход позволяет использовать общую память процесса и ускорить взаимодействие между узлами внутри процесса-агенства, которые могут располагаться в пределах одного вычислительного устройства, что влечет за собой возможность потерять доступ ко всем узлам агенства в случае неисправностей из-за ошибок, допущенных при реализации агентов. Данная проблема решается репликацией агенств на вычислительной системе. Кроме того для доставки сообщений между узлами используются как более высокоуровневые технологии (CORBA, ICE, ACE), так и приближенные к аппаратной части (EtherCAT, I2C, CANBus). Выбор механизма доставки данных между узлами влияет на задержку получения информации, на пропускную способность между узлами, целостность данных, а так же потребление ресурсов вычислительной системы: чем более высокоуровневая технология, тем больше потребление ресурсов системы. Дополнительный функционал на уровне коммуникации, например QoS или шифрование так же влияет на производительность. При наличии такого функционала его следует тестировать отдельно.

	\item [Формат сообщений.] Сообщения в зависимости от их структуры влияют на производительность. Бинарные типы сообщений имеют меньший объем, а следовательно на их передачу требуется меньше энергии и времени. Структурированные типы, вроде XML и JSON, хорошо поддаются анализу для разработчика, но могут занимать больше времени на обработку своих данных, а так же требуют больше времени на передачу данных между узлами.

	\item [Способ взаимодействия с аппаратурой.] Существует два основных способа предоставить интерфейс от аппаратной части системы к прикладному ПО:
	\begin{itemize}[noitemsep]
		\item инкапсулировать взаимодействие с аппаратурой в отдельных узлах, отображающих устройства;
		\item использовать промежуточный слой - сервер, который отвечает на запросы узлов и устройств;
		\item динамически связывающиеся библиотеки.
	\end{itemize}
	
	От способа обращения будет зависеть отзывчивость системы на внешнее взаимодействие. Кроме того, различные реализации может использовать различное количество ресурсов. Кроме того, в случае использования дополнительного слоя абстракции с клиент-серверным взаимодействием между аппаратным слоем системы и фреймворком является уязвимым подходом с точки зрения устойчивости системы.

\end{description}

В таблице \ref{table:chapter2:performance_factors_solutions} показано сопоставление возникающих проблемы и их решений для отобранных для исследования фреймворков \cite{blasco2012multiagent,bruyninckx2001orocos,einhorn2012mira,metta2006yarp,mohamed2008survey,elkady2012comprehensive}.

\input{tex/content/chapter2/performance_factors_solutions_table.tex}

Таким образом, рассматриваемые области тестирования:
\begin{itemize}[noitemsep]
	\item централизованные сервисы, если они имеются во фреймворке;
	\item способы взаимодействия между узлами с целью установления задержки передачи сообщений между узлами;
	\item коммуникация между узлами многоагентной системы с целью установления пропускной способности, при использовании шифрования - задержку передачи сообщения;
	\item формат передачи данных между узлами, объема передаваемых данных, скорости извлечения данных в случае, если информация сжимается;
	\item \todo{интерфейсы между аппаратной частью и фреймворком с целью установления задержки реакции системы на окружение.}
\end{itemize}
