# буферопроблемы
buffer <- c("1", "10", "100", "1000", "10000")
b_1k_real_time <- c(4580.186172553285, 4682.1144877890165, 4696.130734695629, 4647.609275461621, 4677.977688931564)
b_1k_cpu_time <- c(3979.014066657179, 4022.6201363443483, 4043.0389562330433, 3996.525072522072, 4032.751272340824)
b_1k_bytes_per_second <- c(223577799.00550812, 218715403.4698433, 218059518.18379253, 220334104.45400634, 218914227.22643536)
b_1k_manual_bandwidth <- c(285570646.1227563, 266508563.34648475, 295981091.74113256, 233548707.55889267, 289649824.28957945)
b_1k_manual_latency <- c(100541167.69730183, 89514370.37282008, 98827380.76116, 98645086.48662971, 99219020.04579222)

b_4k_real_time <- c(5141.29448106764, 5086.4825499693825, 4996.712260876187, 4914.350042001504, 4930.20967126802)
b_4k_cpu_time <- c(4555.869325588748, 4520.956539210994, 4484.187911371033, 4390.631452501739, 4406.624640378626)
b_4k_bytes_per_second <- c(796736934.3596822, 805315086.1682184, 819773825.8472631, 833495450.3921818, 830833871.4981556)
b_4k_manual_bandwidth <- c(562460814.8161839, 541051935.4185402, 519480747.8371477, 517619176.04281694, 532817554.3644816)
b_4k_manual_latency <- c(73825278.00071314, 77874221.18243358, 78586582.6695374, 79166648.66358423, 78445081.83738217)

b_16k_real_time <- c(11413.245646123949, 10797.271739557818, 9838.876178620927, 10817.46587170375, 10032.899855836778)
b_16k_cpu_time <- c(10687.832977406468, 10110.794076117785, 9185.984708335725, 10111.225631437, 9360.39266823885)
b_16k_bytes_per_second <- c(1444943827.793212, 1522427786.9583912, 1672845539.8542438, 1552375281.0753336, 1634542267.3890026)
b_16k_manual_bandwidth <- c(4854025925.934568, 4244976091.8839583, 5039883825.957062, 3521025198.331669, 8555976419.073015)
b_16k_manual_latency <- c(3676285.601414365, 10023994.052193463, 6987833.432573368, 12683969.933360163, 4338464.470109924)

b_64k_real_time <- c(35241.86476183732, 32294.890055415395, 27581.031056461135, 32410.539184549638, 30851.068553369067)
b_64k_cpu_time <- c(33241.20863759325, 30496.115490451182, 25898.2559040687, 30571.879910891334, 29106.578206122278)
b_64k_bytes_per_second <- c(1904870091.11708, 2159542493.6796823, 2410643142.9612517, 2039646241.2514234, 2187382139.450816)
b_64k_manual_bandwidth <- c(1594122789.7331998, 809782798.6633061, 939146864.5975126, 1267576171.691979, 1099325007.183746)
b_64k_manual_latency <- c(39326305.28582083, 51469032.88383031, 60921372.31911387, 45286113.04486585, 46460204.54936122)

b_256k_real_time <- c(114268.43880865749, 93697.43355981298, 115074.4071538304, 83764.88011132626, 100852.87849219091)
b_256k_cpu_time <- c(108479.34467634936, 89347.84447660146, 109212.65418650089, 80272.52386504423, 96188.6194666941)
b_256k_bytes_per_second <- c(2323881701.4534497, 2926476322.412967, 2285440169.120406, 3139900191.558425, 2675212009.490981)
b_256k_manual_bandwidth <- c(561893310.21282, 489084389.21603614, 660527389.5495522, 692023701.5569701, 629218457.0725011)
b_256k_manual_latency <- c(76813681.20076752, 77811452.96430251, 68887668.59135279, 78444876.04642949, 77162712.9916431)

b_1m_real_time <- c(1045110.7708889504, 1043938.4474867955, 1051105.2499288847, 1044106.2189312959, 1052824.5458658107)
b_1m_cpu_time <- c(1006048.5644091123, 1009134.8073967369, 1004895.4915821294, 996014.952023052, 1002082.1166906192)
b_1m_bytes_per_second <- c(1003449314.9936724, 1004721114.4900757, 997716470.024121, 1004412110.5288732, 996056474.4295423)
b_1m_manual_bandwidth <- c(105805925.1746181, 71085398.25787535, 90615069.17813474, 175012270.98146084, 142791755.3746472)
b_1m_manual_latency <- c(137343184.1157684, 152659687.22916666, 125700754.313254, 101784359.23296383, 102741443.81669703)

b_4m_real_time <- c(3753850.3210739205, 2538826.699143001, 2434603.9247404262, 3573191.76375081, 2344889.4259120347)
b_4m_cpu_time <- c(3713596.038016802, 2497592.8508471227, 2402506.9499997115, 3540859.590603914, 2321858.0445348253)
b_4m_bytes_per_second <- c(1217603642.0833662, 2222609749.2521906, 1876029897.5067196, 1226689567.3281274, 2134439129.120278)
b_4m_manual_bandwidth <- c(16458417.004081905, 38100873.85264189, 49531512.28005635, 28570435.29598547, 43746289.07796217)
b_4m_manual_latency <- c(590373219.65, 407792625.5516667, 382650046.6, 376512161.325, 349799361.53166664)

b_16m_real_time <- c(21395027.363643862, 21004428.776471764, 20703334.917135566, 20928469.642888427, 21080164.358799644)
b_16m_cpu_time <- c(20282776.990910977, 20058544.814708058, 20001775.965714283, 20107569.845712792, 20199333.585295126)
b_16m_bytes_per_second <- c(784414946.7656333, 798853509.4188143, 810590878.1915822, 802032047.0617198, 795992774.0525539)
b_16m_manual_bandwidth <- c(25394987.034445845, 17397175.311926328, 13619220.63213782, 19075255.851903733, 26685113.049180597)
b_16m_manual_latency <- c(1127483215.9, 1317382247.15, 1411569675.05, 1282624062.85, 1113078642.0)

b_64m_real_time <- c(86678925.24996433, 86175066.38751139, 85672930.42501661, 84531585.93753187, 84508287.60006744)
b_64m_cpu_time <- c(85284846.61250034, 84428311.06249854, 83528424.77499607, 83198716.40000471, 83497380.48749842)
b_64m_bytes_per_second <- c(774956270.4606626, 779016401.2050602, 783521912.9193466, 794131967.7890902, 794310429.5221562)
b_64m_manual_bandwidth <- c(19110785.712584555, 17568500.79245288, 17636101.26386756, 17661296.76422714, 13972486.088328427)
b_64m_manual_latency <- c(3856921917.3, 3821787509.6, 3807758396.2, 3802408177.5, 3073897082.7)

plot(factor(buffer, levels=buffer), b_1k_manual_latency / 1000000, type="o", col="black", lty=0, ylim=c(-100, 100), xlab="", ylab="")
points(factor(buffer, levels=buffer), b_1k_manual_latency / 1000000, col="black", pch="o")
lines(factor(buffer, levels=buffer), b_1k_manual_latency / 1000000, col="black", lty=1, lwd=2)
points(factor(buffer, levels=buffer), b_4k_manual_latency / 1000000, col="red", pch="X")
lines(factor(buffer, levels=buffer), b_4k_manual_latency / 1000000, col="red", lty=2, lwd=2)
points(factor(buffer, levels=buffer), b_16k_manual_latency / 1000000, col="blue", pch="V")
lines(factor(buffer, levels=buffer), b_16k_manual_latency / 1000000, col="blue", lty=3, lwd=2)
points(factor(buffer, levels=buffer), b_64k_manual_latency / 1000000, col="blue", pch="A")
lines(factor(buffer, levels=buffer), b_64k_manual_latency / 1000000, col="blue", lty=4, lwd=2)
points(factor(buffer, levels=buffer), b_256k_manual_latency / 1000000, col="black", pch="o")
lines(factor(buffer, levels=buffer), b_256k_manual_latency / 1000000, col="black", lty=5, lwd=2)
title(xlab="Размер буфера", ylab="Задержка (мс)")
legend("bottomright", legend=c("1 Кб", "4 Кб", "16 Кб", "64 Кб", "256 Кб"), col=c("black", "red", "blue", "blue", "black"), lty=c(1, 2, 3, 4, 5), pch=c("o", "X", "V", "A", "o"), ncol=1)


plot(factor(buffer, levels=buffer), b_1m_manual_latency / 1000000000, type="o", col="black", lty=0, ylim=c(-5, 5), xlab="", ylab="")
points(factor(buffer, levels=buffer), b_1m_manual_latency / 1000000000, col="black", pch="o")
lines(factor(buffer, levels=buffer), b_1m_manual_latency / 1000000000, col="black", lty=1, lwd=2)
points(factor(buffer, levels=buffer), b_4m_manual_latency / 1000000000, col="red", pch="x")
lines(factor(buffer, levels=buffer), b_4m_manual_latency / 1000000000, col="red", lty=2, lwd=2)
points(factor(buffer, levels=buffer), b_16m_manual_latency / 1000000000, col="blue", pch="v")
lines(factor(buffer, levels=buffer), b_16m_manual_latency / 1000000000, col="blue", lty=3, lwd=2)
points(factor(buffer, levels=buffer), b_64m_manual_latency / 1000000000, col="black", pch="*")
lines(factor(buffer, levels=buffer), b_64m_manual_latency / 1000000000, col="black", lty=4, lwd=2)
title(xlab="Размер буфера", ylab="Задержка (с)")
legend("bottomright", legend=c("1 Мб", "4 Мб", "16 Мб", "64 Мб"), col=c("black", "red", "blue", "black"), lty=c(1, 2, 3, 4), pch=c("o", "x", "v", "*"), ncol=1)

